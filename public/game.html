<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Crisis Management Game</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f4f4f4;
      padding: 40px;
    }
    h1 {
      color: #c0392b;
    }
    button {
      padding: 12px 24px;
      font-size: 16px;
      background: #27ae60;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #1f8c4d;
    }
    .question-box {
      background: #fff;
      border: 1px solid #ddd;
      padding: 20px;
      margin-top: 20px;
      border-radius: 8px;
    }
    .question-box h2 {
      margin-bottom: 10px;
    }
    .choice {
      margin: 8px 0;
    }
    .choice input {
      margin-right: 10px;
    }
    #status {
      margin-top: 20px;
      padding: 15px;
      background: #ecf0f1;
      border-radius: 6px;
      font-family: monospace;
    }
  </style>
</head>
<body>

  <h1>üß† Crisis Management Game</h1>
  <button id="generateBtn">Generate New Crisis Scenario</button>

  <div id="scenarioContainer"></div>
  <div id="status"></div>

  <script>
    document.getElementById('generateBtn').addEventListener('click', async () => {
      const btn = document.getElementById('generateBtn');
      const status = document.getElementById('status');
      const container = document.getElementById('scenarioContainer');

      btn.disabled = true;
      status.textContent = '‚è≥ Generating scenario...';

      try {
        const res = await fetch('/api/generate-scenario', { method: 'POST' });
        const data = await res.json();

        container.innerHTML = `
          <div class="question-box">
            <h2>${data.title}</h2>
            <p>${data.description}</p>
          </div>
        `;

        data.questions.forEach((q, index) => {
          const qEl = document.createElement('div');
          qEl.className = 'question-box';
          qEl.innerHTML = `
            <h3>Q${index + 1}: ${q.questionText}</h3>
            ${q.choices.map(choice => `
              <div class="choice">
                <label><input type="radio" name="q${index}" value="${choice}"> ${choice}</label>
              </div>`).join('')}
          `;
          container.appendChild(qEl);
        });

        status.textContent = '‚úÖ Scenario loaded. Select your answers!';
      } catch (err) {
        console.error(err);
        status.textContent = '‚ùå Error: ' + err.message;
      } finally {
        btn.disabled = false;
      }
    });
  </script>

</body>
</html>
